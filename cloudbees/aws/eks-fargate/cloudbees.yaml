resource "kubernetes_namespace" "gitlab-runner" {
  metadata {
    name = local.namespace
  }
}

resource "helm_release" "gitlab-runner" {
  name       = local.name
  repository = "cloudbees https://public-charts.artifacts.cloudbees.com/repository/public/"
  chart      = "cloudbees-core"
  version    = local.version

  namespace  = local.namespace

  values = [
    templatefile("${path.module}/values.yaml", { cache_bucket_name = "${var.cache_bucket_name}" })
  ]
}
